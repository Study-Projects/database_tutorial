## Глава 0. Введение

TODO: как-то заставить их запускать venv перед командами, рассказать про cd/ls

Это руководство познакомит вас с написанием и администрированием собственного интернет-блога и публикацией его в сети Интернет при помощи языка программирования Python 3 и фреймворка Django версии 1.11.

Почти каждый сайт состоит из двух половинок: дизайн и внешний вид страниц, которые видит пользователь и серверная логика, что делает сервер. Эти две части называют front-end и back-end соответственно. Это руководство больше о серверной логике, мы не ставим целью сделать дизайн красивым, но ознакомим вас с тем, как можно свободно менять его.

####  Почему Python 3?

Ну, для начала, он очень популярен. А чем популярнее язык - тем больше его коммьюнити, а чем больше коммьюнити - тем легче найти доступные статьи по интересующим вас темам, тем легче попасть в него и тем проще получить наиболее квалифицированную помощь. Также огромное общество выпустило огромное множество всяческих модулей для более комфортной работы.

Также он очень прост. Нет никаких “ритуалов” вроде точки с запятой в конце строки, для освоения, всё правда будет очень просто.

#### Почему Django?

Это самый популярный python фреймворк. Разве этого недостаточно?

При успешном выполнении всех шагов, описанных в данном руководстве, вы сможете получить что-то вроде этого:

![blog_screen](https://github.com/Study-Projects/database_tutorial/blob/master/img/blog_screen.jpg)

## Глава 1. Установка зависимостей.

Перед началом работы необходимо создать *виртуальное окружение* (другое название - virtualenv). Virtualenv будет изолировать зависимости Python/Django для каждого отдельного проекта. Это значит, что изменения одного сайта никогда не затронут другие сайты, которые вы разрабатываете. 

Для создания virtualenv в консоли (откройте раздел Поиск и введите команду `cmd`) необходимо выполнить следующие шаги: 

1. Создадим на рабочем столе папку `django_blog`: `mkdir C:\Users\USER\Desktop\django_blog`
2. И разместим в ней виртуальное окружение: `python -m venv C:\Users\USER\Desktop\django_blog\venv`
3. Теперь активируем его: `C:\Users\USER\Desktop\django_blog\venv\Scripts\activate.bat`
4. В начале строки появится приписка (venv), которая показывает, что виртуальное окружение активно. Наконец, чтобы деактивировать виртуальное окружение, достаточно написать `deactivate`.

После выпполнения всех команд можно приступить к установке Django. Для загрузки модулей в Python используется программа, которая называется pip. Для начала установки в консоли необходимо ввести команду `pip install django==1.11.0` (В процессе установки консоль может зависнуть. Если это случилось, необходимо использовать команду `python -m pip install django==1.11.0`. Прервать зависшую установку можно комбинацией клавиш `Ctrl-C`).

Также в процессе разработки нам понадобится система контроля версий - Git. Эта программа отслеживает изменения, происходящие с файлами, чтобы впоследствии можно было восстановить состояние кода на нужный момент времени. Это немного похоже на функцию отслеживания изменений в Microsoft Word, но куда мощнее.

TODO: Узнать есть ли в РЭУ гит

Скачать Git можно [здесь](https://git-scm.com/). Процесс установки может выполнятся согласно инструкции, за исключением шага №5 "Adjusting your PATH environment" (Настройка системной переменной Path). Здесь стоит выбрать "Use Git and optional Unix tools from the Windows Command Prompt" (Запуск Git и соответствующих Unix утилит через командную строку Windows, нижняя опция). Все остальные настройки можно оставить по умолчанию. Также нужно будет выбрать опцию "Checkout Windows-style, commit Unix-style line endings".

После окончания установки необходимо перезапустить командную строку.



## Глава 2. Создание проекта.

Для написания сайтов на фреймворке Django используется структура, согласно которой за каждый раздел сайта отвечает отдельный блок файлов с кодом, название которого app (приложение). Совокупность приложений образует проект. Для создания проекта необходимо запустить ряд стандартных скриптов. Для начала выполните команду `C:\Users\USER\Desktop\django_blog django-admin.exe startproject django_blog . `. Очень важно не потерять точку в конце, чтобы создать проект в текущей директории и не допустить появления лишних папок.  

`django-admin.py` — это скрипт, который создаст необходимую структуру директорий и файлы. Теперь у проекта должна быть следующая структура:

```
django_blog
├───manage.py
└───django_blog
        settings.py
        urls.py
        wsgi.py
        __init__.py
```

`manage.py` — это скрипт, который помогает с управлением сайтом. С помощью него запускается веб-сервер на компьютере без установки дополнительных программ.

Файл `settings.py` содержит настройки для веб-сайта.

Файл `urls.py` содержит список шаблонов, по которым ориентируется urlresolver. Это обеспечивает схему url-адресов сайта

#### Изменение настроек

Внесем изменения в файл `django_blog/settings.py`. Для редактирования файла, нажмите на него ПКМ и выберите пункт "Edit with IDLE". 

В файле `settings.py` нужно найти строку `TIME_ZONE` и внести изменения в соответствии со своим часовым поясом:

`TIME_ZONE = 'Europe/Moscow'`

Аналогично с язоковыми настройками:

`LANGUAGE_CODE = 'ru-ru'`

Также необходимо добавить в настройки информацию о расположении статических файлов (Картинки, файлы с кодом CSS для создания стилей). Спуститесь в конец файла и после переменной STATIC_URL добавьте новую — STATIC_ROOT:

```
STATIC_URL = '/static/'
STATIC_ROOT = os.path.join(BASE_DIR, 'static')
```

TODO: Добавить про ALLOWED_HOSTS

#### Настройка Базы Данных

Существует множество различных баз данных, которые могут хранить данные для сайта. Мы будем использовать стандартную — sqlite3.

Она уже выбрана по умолчанию в файле `django_blog/settings.py`:

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
    }
}
```

Для создания базы данных нужно запустить команду `python manage.py migrate` (необходимо находится в директории django_blog, где расположен файл `manage.py`). 

#### Запуск веб-сервера

После успешного создания базы данных можно перейти к запуску веб-сервера, чтобы удостовериться в работоспособности созданного проекта. 

> Веб-сервер - сервер, принимающий HTTP-запросы от клиентов, обычно веб-браузеров, и выдающий им HTTP-ответы, как правило, вместе с HTML-страницей, изображением, файлом, медиа-потоком или другими данными.

Для запуска веб-сервера необходимо находится в директории django_blog, в которой находится файл `manage.py`. 

Выполним команду `python manage.py runserver`.
> В случае возникновения ошибки UnicodeDecodeError используйте команду `python manage.py runserver 0:8000`

После этого откроем браузер, и введем следующий адрес `http://127.0.0.1:8000/`. В случае успеха появится приветсвенное письмо.

![hello_screen](https://github.com/Study-Projects/database_tutorial/blob/master/img/it_worked2.png)

Во время работы веб-сервера консоль будет недоступна для ввода команд. Чтобы иметь такую возможность, нужно открыть еще одно окно терминала, активировать виртуальное окружение и перейти в домашнюю директорию проекта, содержащую файл `manage.py`.

## Глава 3. Создание приложения.

Очень удобно писать свой сайт так, будто он состоит из нескольких кусочков. Один кусочек отвечает за блоговую платформу, второй за регистрацию пользователей, третий за администрирование сайта и так далее. Каждый такой кусочек называется *приложением* (app).

В этот раз мы создадим приложение `blog`, которое будет отвечать непосредственно за наши записи, коммантарии, лайки и так далее. Команда почти такая же, как и при создании проекта: `C:\Users\USER\Desktop\django_blog django-admin.exe startapp blog`

Теперь структура нашего проекта должна выглядеть так:
```
online_blog
├── blog
│   ├── __init__.py
│   ├── admin.py
│   ├── apps.py
│   ├── migrations
│   │   └── __init__.py
│   ├── models.py
│   ├── tests.py
│   └── views.py
├── db.sqlite3
├── manage.py
└── django_blog
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    └── wsgi.py
```

После того, как мы создали приложение, надо подключить его к проекту, т.к. бывает такое, что рядом лежат много проектов, пользующихся одинаковыми приложениями, стоит показывать проекту какие приложения использовать в явном виде. Для этого зайдём в уже знакомый нам `settings.py` и добавим название нашего приложения в список `INSTALLED_APPS`.

Теперь он должен выглядеть вот так:

```
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'blog',
]
```


Структуру приложения мы рассмотрим на протяжении следующих нескольких глав.

## Глава 4. URL- схема

URL — это просто адрес в интернете. ВЫ можете увидеть URL каждый раз, когда посещаете веб-сайт — он отображается в адресной строке вашего браузера (https://google.org — это URL-адрес гугла. И 127.0.0.1:8000 — тоже URL)

В Django мы используем так называемый URLconf (англ. URL configuration, конфигурация URL). URLconf — это набор шаблонов, которые Django попробует сравнить с полученным URL, чтобы выбрать правильный метод для отображения (view). TODO: добавить ссылку на будущую главу.

Откроем urls.py внутри папки с нашим проектом и посмотрим что там происходит:
```
from django.conf.urls import url
from django.contrib import admin

urlpatterns = [
    url(r'^admin/', admin.site.urls),
]
```

Не пугайтесь синтакиса, его объяснение будет чуть ниже.

Таким образом, любому URL-адресу, начинающемуся с admin/, Django будет находить соответствующее view (представление). В этом случае мы охватываем большое количество различных URL-адресов, которые явно не прописаны в этом маленьком файле — так он становится более аккуратным и удобочитаемым. Если ни один шаблон не подойдёт - вы получите знакомую вам ошибку 404, страница не найдена. Если подойдёт много шаблоноа, то  Django  выберет первый из них, поэтому порядок тоже важен.

#### Regex 

Regex - это regular expressions
Регулярные выражения имеют множество (множество!) правил, которые формируют поисковый шаблон. Поскольку регулярные выражения являются довольно сложной темой, мы не будем рассматривать их подробно.

Нам понадобится весьма ограниченное количество правил:
```
^ — начало текста;
$ — конец текста;
\d — цифра;
+ — чтобы указать, что предыдущий элемент должен быть повторен как минимум один раз;
() — для получения части шаблона.
```

Всё остальное в шаблоне URL будет интерпретироваться буквально.

Приведём пример:

Пусть у нас есть веб-сайт с адресом http://www.mysite.com/post/12345/, где 12345 — номер записи в блоге.

Писать представления для всех номеров будет весьма утомительно. С помощью регулярных же выражений мы можем создать шаблон, соответствующий url, который позволит извлекать из адреса номер: ^post/(\d+)/$. Давай разобьём шаблон на части, чтобы понять логику его работы:

^post/ говорит Django рассматривать url с post/ в начале (сразу после ^);
(\d+) означает, что дальше должен присутствовать номер (одна или несколько цифр) и мы хотим извлечь его из url;
/ говорит Django об очередном символе / после номера;
$ означает конец url, т.е. шаблону соответствуют только адреса с / на конце.


Если вам захочется разобраться подробнее в шаблонах ссылок, котоые мы будем приводить в будущем, можете возвращаться к этому примеру.

## Глава 4. Модели Django.

Перед тем, как рассматривать модели, надо понять что такое объект и класс. Если вы уже знакомы с объектно-ориентированным программированием, советуем всё равно ознакомиться с разделом, дабы не пропустить ничего важного.

Объект - это совокупность методов и свойств. Звучит странно, поэтому приведём пример:

Попробуем описать объект `Кошка`.
`Кошка` умеет мяукать, царапаться и кусаться. Это её методы.
У `Кошки` есть окрас, порода, высота, вес. Это её свойства.

Так же мы моделируем и другие объекты, как `Работник`, `Компания` и тд.
Попробуем определить что будет у объекта `Post` в нашем блоге

Мы хотим хранить его заголовок (`title`)
его текст (`text`)
его автора (`author`)
дату написания (`created_date`)
и наконец дату публикации (`published_date`)

Из методов мы можем выделить `publish`, `edit`, `delete`

#### Модель в Django

Зная, что представляет из себя объект, мы можем создать модель Django для записи в блоге.

Модель в Django — это объект определённого свойства: он хранится в базе данных. База данных представляет собой совокупность различных данных. Это то место, где ты будешь хранить информацию о своих пользователях, записях в блоге и т.д.

#### Модель Post

Создадим модель `Post` в приложении `blog`. Для этого откроем файл `models.py` и запишем туда следущее:

```
from django.db import models
from django.utils import timezone


class Post(models.Model):
    author = models.ForeignKey('auth.User')
    title = models.CharField(max_length=200)
    text = models.TextField()
    created_date = models.DateTimeField(
            default=timezone.now)
    published_date = models.DateTimeField(
            blank=True, null=True)

    def publish(self):
        self.published_date = timezone.now()
        self.save()

    def __str__(self):
        return self.title

```

Рассмотрим подробнее что тут написано:

Мы создаём класс объектов Post, т.е. описываем таблицу базы данных, в которой будут хранится записи нашего блога.
Поле author является ссылкой на таблицу User, которая уже встроена в Django, т.к. эта модель требуется почти в каждом сайте.
Поле title - это текстовое поле, ограниченное 200 символами.
Поле text - это тоже текстовое поле, но оно уже будет ограничено в зависимости от базы данных, у каждой базы данных есть сои лимиты и мы хотим использовать максимальный для каждой.
Поле created_date - это поле Даты и Времени, т.е. мы будем указывать точное дату и время создания записи.
default=timezone.now - это значит что значением по умолчанию будет являться значение времени, соответствующее времени созданию объекта. Собственно ровно то значение, которое ы и хотим там хранить.
Поле published_date  - тоже поле Даты и Времени, но мы указываем, что оно может оставаться пустым  нас это устраиает.

Далее идут 2 метода нашего класса:

publish - это метод, который принимает на вход посты, после чего он ставит им дату публикации в соответствии с нашими ожиданиями, после чего сохраняет изменения.

__str__ - это "магический метод" не будем углубляться в подробности, но этот метод должен нам возвращать то, как наш пост будет выглядеть "вкратце". В данном случае мы возвращаем его title.

## Глава 5. Администрирование БД.

Для управления содержимым созданной нами базы данных, ее моделей Django предоставляет удобный интерфейс администратора.

Прежде всего нужно создать учетную запись администратора. Для этого в консоли выполните команду `python manage.py createsuperuser`. Введите необходимые данные, нажмите Enter.

Откроем файл `blog/admin.py` и заменим его содержимое на:

```python3
from django.contrib import admin
from .models import Post

admin.site.register(Post)
```

Данный код позволит отобразить модель `Post` на странице администратора.

В браузере перейдем по адресу `http://127.0.0.1:8000/admin/`. После авторизации вы увидите панель управления приложениямии и, содержащихся в них, моделями. Перейдите в раздел Post и выполните несколько действий для ознакомления с возможностями интерфейса админа. 


## Глава 6. Django ORM, представления и динамические данные. 

Для работы с базами данных может использоваться несколько подходов. В случае с Django взаимодействие с БД происходит через ORM (Object-Relational Mapping) - технологии программирования, которая связывает базы данных с концепциями объектно-ориентированных языков программирования, создавая «виртуальную объектную базу данных». (Википедия)

Задача ORM - обеспечить работу с данными в терминах классов, а не таблиц данных и напротив, преобразовать термины и данные классов в данные, пригодные для хранения в СУБД. Необходимо также обеспечить интерфейс для CRUD-операций над данными. В общем, необходимо избавиться от необходимости писать SQL-код для взаимодействия в СУБД.

Это краткое описание, за подробностями можно обратиться к пособию по ORM (TODO: ссыль на Пашину методичку)

Для отображения данных содержащихся в БД пользователю в Django используются представления (views). Их задача - соединять между собой модели и шаблоны - мы определяем, что (какая модель) будет отображена в шаблоне. По сути - это обычные функции, в которых происходит обработка данных.

Откроем файл `blog/views.py` и вставим следующий код: 

```
from django.shortcuts import render
from django.utils import timezone
from .models import Post

def post_list(request):
    posts = Post.objects.filter(published_date__lte=timezone.now()).order_by('published_date')
    return render(request, 'blog/post_list.html', {'posts': posts})
```

Что здесь происходит? В начале импортируется функция `render`, которая отправляет данные в файл с HTML-разметкой, которая будет отображаться на экране браузера (шаблоны будут созданы в следующей главе). Также импортируется функция `timezone` для определения времени публикации поста и модель Post, для получения данных о постах из БД. 

В представлении `post_list` мы получаем список всех постов, находящихся в БД, отсортированных по дате публикации. Далее мы передаем в HTML-файл переменную содержащую все посты и имя самого HTML-файла. Переменная request служит передатчиком информации о запросе клиента к серверу и ответа сервера клиенту. Это относится к основам работы HTTP протокола передачи данных. [Подробнее тут](https://ru.wikipedia.org/wiki/HTTP).

Таким образом принцип работы предстваления сводится к:
- Получению запроса от клиента;
- Проведение манипуляций с данными полученными от клиента (выбор данных из БД, обработка данных, поступивших в запросе и т.д.
- Передача полученных данных в шаблон и их отбражение на странице пользователя. 



## Глава 7. Шаблоны.

https://tutorial.djangogirls.org/ru/extend_your_application/

Шаблон — это файл, который можено использовать повторно для отображения различной информации в заданном формате. Шаблоны в Django написаны на языке, называемом HTML - гипертекстовой разметки. Гипертекст — это тип текста, поддерживающий гиперссылки между страницами. Под разметкой понимается введение в текст документа кода, который будет говорить браузеру (в нашем случае), как интерпретировать веб-страницу. HTML код строится при помощи тегов, каждый из которых должен начинаться с `<` и заканчиваться `>`. Эти теги представляют элементы разметки.

>В этом пособии не будет объяснения по HTML, вместо этого вам будет предложен готовый код. За подробностями можно обратиться в Гугл. На просторах Интернета множество курсов по HTML.

Код на HTML статичен - это значит он не может изменятся без прямого переписывания содержимого тегов. Также браузер не воспринимает других языков, помимо HTML. Это нам не подходит, так как мы хотим, чтобы страница отоброжала ту информацию, которую запросит пользователь и при этом избежать штампования большого количества html-файлов, различающихся только текстом в тегах.

Для решения этой проблемы существуют *теги шаблонов Django*. Теги шаблонов Django позволяют вставлять Python в HTML, давая возможность создавать динамические веб-сайты быстрее и проще. 

В предыдущей главе предстваление `post_list` передавало шаблону список постов в переменной `posts`. Пришло время отобразить это. 

Создадим шаблон `blog/templates/blog/post_list.html`. 
Чтобы вставить переменную в шаблон Django, нам нужно использовать двойные фигурные скобки с именем переменной внутри:
`{{ posts }}`.

Если просто вставить переменную в шаблон мы увидим строку подобного вида: `<QuerySet [<Post: My second post>, <Post: My first post>]>`.
Так Django отображает содержимое БД. `QuerySet` означает, что объект, живущий в переменной - итерируемый. Это значит, что мы можем применить к нему цикл `for` и вывести поэлементно его содержимое (привет началам программирования).

Однако прежде, чем писать код, давайте задумаемся. Мы знаем как располагать теги для красивого оформления (если нет - гугл в помощь). Мы также знаем, как динамически отображать данные полученные нами из БД. Однако есть один момент - при таком подоходе, все шаблоны будут иметь 80% одинакового содержимого. Стили и цвета шапки и футера, цветовая гамма, позиционирование базовых блоков - все это будет повторяться из шаблона в шаблон. Чтобы избежать этого, в Django предусмотрен механизм расширения шаблонов. 

#### Создаем базовый шаблон

Базовый шаблон — это наиболее общая типовая форма страницы, которую можно расширять для отдельных случев. 
Создадим файл `base.html` в директории `blog/templates/blog/`. Получим такую структуру: 

```
blog
└───templates
    └───blog
            base.html
            post_list.html
```

Откройте файл `base.html` и вставьте в него:

```
{% load staticfiles %}
<html>
    <head>
        <title>Django blog</title>
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
        <link href='//fonts.googleapis.com/css?family=Lobster&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="{% static 'css/blog.css' %}">
    </head>
    <body>
        <div class="page-header">
            <h1><a href="/">Django Girls Blog</a></h1>
        </div>
        <div class="content container">
            <div class="row">
                <div class="col-md-8">
                {% block content %}
                {% endblock %}
                </div>
            </div>
        </div>
    </body>
</html>
```
То что находится в `{}` - теги Django. Конструкция `{{ var_name }}` используется для отображения содержимого переменной. 
Конструкция `{% some_instruction %}` используется для применения возможностей языка тегов.

Тег `{% block content %} {% endblock %}` будет включать в себя содержимое той или иной веб-страницы. 

Таким образом мы создали базовый шаблон, в котором будет прописана статичная информация, не меняющаяся от одной страницы сайта к другой. А всю динамически изменяющуюся информацию мы вынесем в отдельные файлы и заключим их содержимое в блок `{% block content %} {% endblock %}`, для того чтобы обеспечить соединение `base` шаблона,с основными стилями, и обычного, с его информацией. 

Перейем в файо `post_list.html` и вставим в него следующий код:

```
{% extends 'blog/base.html' %}

{% block content %}
    {% for post in posts %}
        <div class="post">
            <div class="date">
                {{ post.published_date }}
            </div>
            <h1><a href="">{{ post.title }}</a></h1>
            <p>{{ post.text|linebreaksbr }}</p>
        </div>
    {% endfor %}
{% endblock %}
```

Команда `{% extends 'blog/base.html' %}` обеспечивает наследование стилей и информации из `base` шаблона в нужный нам шаблон. `{% block content %} {% endblock %}` включает в себя информацию, необходимую для отображения. Конструкция `{% for post in posts %} {% endfor %}` обеспечивает перебор содержимого переменной `{{ posts }}` и выводит его на страницу, обращаясь в каждой строке к соответсвующим полям таблицы Post, как например `{{ post.title }}` (Подробнее об этом было рассказано в главе Модели Django).

Теперь можно посмотреть, как информация отбражается в браузере.

> Если появилась ошибка TemplateDoesNotExists, это значит, что нет файла blog/base.html и runserver запущен в командной строке. Попробуйте остановить его (`Ctrl-C`) и перезапустите веб-сервер командой `python manage.py runserver`.


## Глава 8. Формы.
https://tutorial.djangogirls.org/ru/django_forms/


## Глава 9. Публикация.

Перед тем, как разместить наш сайт, стоит воспользоваться системой контроля версий Git. Вообще, пользоваться им стоит не совсем так, но т.к. это ваши первые шаги в веб-разработке - мы зафиксируем только итоговую версию вашего проекта. Так делать нехорошо, т.к. стоит факсировать каждое изменение, но на рассказ о том, как это делать правильно - потребуется ещё далеко не одна глава.

#### Git и Github

Для начала разместим наш код на Github. Github - это склад git-репозиториев, где разработчики могут посмотреть на чужие проекты, находить друг у друга баги и ошибки, советовать решения, "лайкать" чей-то код, "репостить" его и так далее.

Сперва создайте свой аккаунт на [Github](https://github.com/).
Затем создайте там свой репозиторий:

Для этого надо нажать на плюс в правом верхнем углу, затем `New repository`, а затем заполнить

![github](https://github.com/Study-Projects/database_tutorial/blob/master/img/github.jpg)

Если вы пользуетесь гитом впервые, то начать следует с этого ряда команд (где следует заменить стандартный ник и почту на свои, впрочем, ничего страшного, если не поменяете):

```
git init
git config --global user.name "John Doe"
git config --global user.email johndoe@example.com
```


Далее отправим свой код в этот репозиторий. Для этого выполним следующий ряд команд:

```
git add --all
git commit -m "First commit"
git push ссылка_на_ваш_репозиторий
```

Git должен вам ответить примерно так:
```
Username for 'https://github.com': voron434
Password for 'https://hjwp@github.com':
Counting objects: 6, done.
Writing objects: 100% (6/6), 200 bytes | 0 bytes/s, done.
Total 3 (delta 0), reused 0 (delta 0)
To https://github.com/hjwp/my-first-blog.git
 * [new branch]      master -> master
Branch master set up to track remote branch master from origin.
```

Далее стоит перейти по ссылке на ваш репозиторий и убедитьмя, что код на месте.

#### pythonanywhere

Мы научились показывать код, но как же показать сам сайт? Воспользуется [этим сайтом](https://www.pythonanywhere.com). Сперва, следует создать свой бесплатный аккаунт. Думаю, вы осилите этот шаг.

> Выбирая никнейм, помните, что URL блога примет вид `yourusername.pythonanywhere.com`

Далее вы попадёте на вкладку `Consoles`, где вам надо открыть bash консоль:

![pythonanywhere_bash_console](https://github.com/Study-Projects/database_tutorial/blob/master/img/pythonanywhere_bash_console.png)

> pythonanywhere использует Linux, поэтому если вы используете Windows, команды могут показаться вам не совсем знакомыми.

Теперь мы загрузим ваш код из github  сюда, создав "клон" репозитория.

```
git clone ссылка_на_ваш_репозиторий
```

Далее наберите `ls`, если вы видите папку со своим проектом, то перейдите в неё командой `cd название_папки`.

#### Развертывание venv

Давайте установим Python 3 и Django нужных нам версий на этот сервер. Так как на сервере у нас могут быть несколько проектов бок о бок, давайте снова создадим виртуальное окружение, так же, как мы делали у себя на компьютере:
```
cd my-first-blog

virtualenv --python=python3.6 venv
source venv/bin/activate
pip install django~=1.11.0
```

Если вы увидели ошибку установки `wheel`, наберите `pip install wheel`, а затем повторите попытку установки django.

#### Создание базы данных

База данных у нас создастся сразу со всеми миграциями, что мы проводили. Если мы снова поменяем базу данных, то мы сможем повторить эту команду вновь, тогда база данных не очистится, а просто мигрирует к новой версии.

```
python manage.py migrate
```

Чтобы управлять базой данных, нужно создать аккаунт администратора:

```
python manage.py createsuperuser
```

Теперь просто заполните все поля так, как вы хотите

#### Финальные шаги

Теперь наш код загружен на PythonAnywhere, виртуальное окружение готово и база данных инициализирована — мы готовы опубликовать блог как веб-приложение!

Вернитесь в панель управления PythonAnywhere, нажав на лого в верхнем левом углу, затем переключитесь на вкладку Web и нажмите кнопку `Add a new web app`.

После подтверждения доменного имени выберите `Manual configuration` (*Не «Django»!*) в диалоговом окне. Затем выберите Python 3.6 и завершите работу мастера.

Теперь подключим наш `venv` к серверу:


![pythonanywhere_web_tab_virtualenv](https://github.com/Study-Projects/database_tutorial/blob/master/img/pythonanywhere_web_tab_virtualenv.png)

В секции *virtualenv* кликните по красному кресту, после чего введите путь до своего venv на сервере в соответствии с этим образцом.

Теперь кликните по *WSGI configuration file* и настройте его примерно так:
```
import os
import sys

path = os.path.expanduser('~/my-first-blog')
if path not in sys.path:
    sys.path.append(path)

os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'

from django.core.wsgi import get_wsgi_application
from django.contrib.staticfiles.handlers import StaticFilesHandler
application = StaticFilesHandler(get_wsgi_application())
```

Стоит заменить my-first-blog на ваше  название файла и mysite на имя вашего проекта.

Нажмите `Save` и перейдите обратно во вкладку `Web`. Нажмите `Reload` в самом верху и перейдите по ссылке на ваш сайт.

#### Советы по отладке

Если у вас ошибка при попытке посетить свой сайт, для получения отладочной информации первым делом просмотрите журнал ошибок. Ссылку на него вы найдёте на вкладке Web на PythonAnywhere. Посмотрите, нет ли там сообщений о каких-нибудь ошибках; самые последние из них приведены ниже. Они включают:

Пропуск одного из шагов в консоли: создание virtualenv, её активация, установка Django в виртуальное окружение, инициализация базы данных.

Ошибка в пути к virtualenv — рядом должно появиться небольшое предупреждение, если PythonAnywhere не может найти виртуальное окружение по указанному адресу.

Ошибка в файле настроек WSGI — вы правильно указали путь к директории?

Вы выбрали одну и ту же версию Python для virtualenv и для веб-приложения? Обе должны быть 3.6.

Также можете посмотреть общие советы по отладке на вики PythonAnywhere.
